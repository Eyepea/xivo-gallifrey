Author : Thomas Bernard

Add an ami event when ATXFER is in progress.

Event: Atxfer
SrcChannel:
SrcUniqueid:
DstChannel:
DstUniqueid:

Index: asterisk-1.4.31/res/res_features.c
===================================================================
--- asterisk-1.4.31.orig/res/res_features.c	2010-05-20 16:24:09.000000000 +0200
+++ asterisk-1.4.31/res/res_features.c	2010-05-20 16:24:18.000000000 +0200
@@ -1008,6 +1008,16 @@
 			return -1;
 		return FEATURE_RETURN_SUCCESS;
 	}
+	/* atxfer ami event */
+	manager_event(EVENT_FLAG_CALL, "Atxfer",
+	                               "SrcChannel: %s\r\n"
+	                               "SrcUniqueid: %s\r\n"
+	                               "DstChannel: %s\r\n"
+	                               "DstUniqueid: %s\r\n",
+	                               transferer->name,
+	                               transferer->uniqueid,
+	                               newchan->name,
+	                               newchan->uniqueid);
 
 	if (!ast_check_hangup(transferer)) {
 		if (check_compat(transferer, newchan)) {
