# $Revision$
# $Date$
#
# sample xivo_daemon.conf file
#

[general]
commandset = xivocti
incoming_tcp_fagi = 0.0.0.0   : 5002
incoming_tcp_cti  = 0.0.0.0   : 5003
incoming_tcp_webi = 127.0.0.1 : 5004
incoming_tcp_info = 127.0.0.1 : 5005

asterisklist = xivo
updates_period = 60
contextlist = context-default
userlists = https://127.0.0.1/service/ipbx/json.php/restricted/pbx_settings/users
presence = presence-xivo
cticdr = sqlite:/var/lib/pf-xivo-cti-server/sqlite/xivo.db

;; local asterisk
[xivo]
localaddr = 127.0.0.1
ipaddress = 127.0.0.1
ipaddress_webi = 127.0.0.1
urllist_agents = https://127.0.0.1/service/ipbx/json.php/restricted/pbx_settings/agents
urllist_phones = https://127.0.0.1/service/ipbx/json.php/restricted/pbx_settings/users
urllist_queues = https://127.0.0.1/service/ipbx/json.php/restricted/pbx_settings/queues
ami_port = 5038
ami_login = xivouser
ami_pass  = xivouser
cdr_db_uri = sqlite:/var/lib/asterisk/astsqlite?timeout_ms=150
userfeatures_db_uri = sqlite:/var/lib/asterisk/astsqlite?timeout_ms=150

;; Context Definitions

[context-default]
contextname = default
directories = directory_xivo
display = dir_display

[directory_xivo]
;; will be internal XIVO directory

[dir_display]
10 = Numéro|phone||{db-phone}
20 = Nom|||{db-fullname}
30 = Entreprise||Inconnue|{db-company}
40 = E-mail|||{db-mail}({xivo-dir})

[sheet_events]
agi = sheet_action_agi

[sheet_action_agi]
directories = directory_xivo
whom = dest
sheet_info = sheet_display_agi
systray_info = systray_display_agi
focus = no

[sheet_display_agi] # config fiche
00 = |text|Inconnu|Appel <b>{xivo-callerid}</b>
05 = |form||:/common/form_default.ui
10 = Numéro Entrant|phone|Inconnu|<b>{xivo-callerid}</b> ({db-fullname})
15 = Nom|text|Inconnu|{db-firstname} <b>{db-lastname}</b> {db-fullname}
20 = Numéro Appelé|phone|Inconnu|{xivo-calledid}

[systray_display_agi]
10 = |title||Appel
20 = |body|Inconnu|appel de {xivo-callerid} pour {xivo-calledid}
30 = |body||le {xivo-date}, il est {xivo-time}


;; Special options for the commandset
[xivocti]
;; these are the client kind definitions, that shall be defined on a per-user basis in the WEBI
;; for instance, users a,b,c will have the 'agent' feature, while d,e,f,g will have the 'xcl' one

;; ','-separated list of xlets
;; inside each xlet definition : 3 arguments '-'-separated :
;; 1st one = xlet name, which are reserved keywords
;; 2nd one = kind of 'geometry' : dock, tab, grid
;; 3rd one = if grid : 0 = top, 2 = bottom (1 is implicitly used by tabs and docks : forget it please)
;;           if tab  : ~ order in the display
;;           if dock : c,f,m,s = closeable, floatable, moveable (these 3 are Qt options for docks, always available),
;;                               scrollable (only for agent- and queue-related xlets)
;; 'tabber-grid' or 'tabber-dock' is compulsory to use tabs

agentsup-xlets = queues-dock-ms,queuedetails-dock-mcs,queueentrydetails-dock-mcs,agents-dock-ms,agentdetails-dock-mcs,identity-grid-0,conference-dock-cfm
agentsup-funcs = agents,presence,switchboard,nojoinleave
agentsup-maxgui = 15
agentsup-appliname = Superviseur

client-xlets = tabber-grid,dial-grid-2,search-tab-0,customerinfo-tab-4,identity-grid-0
client-funcs = agents,presence,customerinfo,switchboard,nojoinleave
client-maxgui = 30
client-appliname = Client

clock-xlets = datetime-dock-fm
clock-funcs = presence
clock-maxgui = -1
clock-appliname = Horloge

oper-xlets = dial-dock-m,operator-dock-m,datetime-dock-cfm,identity-grid-0,search-dock-cfm,parking-dock-cfm,calls-dock-cfm
oper-funcs = presence,switchboard,search,dial
oper-maxgui = 15
oper-appliname = Opérateur

switchboard-xlets = customerinfo-dock-cfm,switchboard-dock-cfm,identity-grid-0,calls-dock-cfm,search-dock-fm,fax-dock-cfm
switchboard-funcs = agents,presence,customerinfo,switchboard
switchboard-maxgui = 15
switchboard-appliname = Switchboard


;; Presence definitions and options
;; keyword = DisplayedName,allowed states,actions
;; allowed states : from <keyword>, you can only go to ':'-separated list of other keywords : other ones are hidden
;; actions : ':'-separated list of actions : "queueadd-martinique-false" => adds the agent into martinique queue
;;    for the time being, only 'queueadd' and 'queueremove' do mean something
[presence-xivo]
available = Disponible,available:away:outtolunch:donotdisturb:berightback,
away = Absent,available:away:outtolunch:donotdisturb:berightback,
outtolunch = Parti Manger,available:away:outtolunch:donotdisturb:berightback,
donotdisturb = Ne Pas Déranger,available:away:outtolunch:donotdisturb:berightback,
berightback = Bientôt de Retour,available:away:outtolunch:donotdisturb:berightback,
