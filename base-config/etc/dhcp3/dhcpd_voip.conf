class "voip-mac-address-prefix" {
    match substring(hardware, 0, 4);
}

# Polycom
subclass "voip-mac-address-prefix" 1:00:04:f2 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Polycom PREFIX 1:00:04:f2"));
    option tftp-server-name = concat(config-option VOIP.http-server-uri, "/Polycom");
}

# Polycom Kirk
class "KirkIP6000" {
    match if option vendor-class-identifier = "KIRK.IP6000";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Polycom KIRK.IP6000"));
}

subclass "voip-mac-address-prefix" 1:00:90:33 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Polycom Kirk PREFIX 1:00:90:33"));
}

# Swissvoice
subclass "voip-mac-address-prefix" 1:00:05:90 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Swissvoice PREFIX 1:00:05:90"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "swupdate_ip10.inf";
}

# Linksys
class "LinksysSPA901" {
    match if option vendor-class-identifier = "LINKSYS SPA-901";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT LINKSYS SPA-901"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa901.cfg";
}

class "LinksysSPA921" {
    match if option vendor-class-identifier = "LINKSYS SPA-921";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT LINKSYS SPA-921"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa921.cfg";
}

class "LinksysSPA922" {
    match if option vendor-class-identifier = "LINKSYS SPA-922";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys SPA-922"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa922.cfg";
}

class "LinksysSPA941" {
    match if option vendor-class-identifier = "LINKSYS SPA-941";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys SPA-941"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa941.cfg";
}

class "LinksysSPA942" {
    match if option vendor-class-identifier = "LINKSYS SPA-942";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys SPA-942"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa942.cfg";
}

class "LinksysSPA962" {
    match if option vendor-class-identifier = "LINKSYS SPA-962";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys SPA-962"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa962.cfg";
}

class "LinksysSPA8000" {
    match if option vendor-class-identifier = "LINKSYS SPA8000";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys SPA-8000"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
    option bootfile-name "Linksys/spa8000.cfg";
}

subclass "voip-mac-address-prefix" 1:00:18:f8 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys PREFIX 1:00:18:f8"));
        option tftp-server-name = config-option VOIP.tftp-server-name;
    }
}

subclass "voip-mac-address-prefix" 1:00:1c:10 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys PREFIX 1:00:1c:10"));
        option tftp-server-name = config-option VOIP.tftp-server-name;
    }
}

subclass "voip-mac-address-prefix" 1:00:1e:e5 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys PREFIX 1:00:1e:e5"));
        option tftp-server-name = config-option VOIP.tftp-server-name;
    }
}

subclass "voip-mac-address-prefix" 1:00:0e:08 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Linksys PREFIX 1:00:0e:08"));
        option tftp-server-name = config-option VOIP.tftp-server-name;
    }
}

# Thomson
class "ThomsonST2022S" {
    match if option user-class = "Thomson ST2022S";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Thomson ST2022S"));
    option bootfile-name "Thomson/ST2022S";
    option tftp-server-name = config-option VOIP.tftp-server-name;
    #option option-43 = concat(config-option VOIP.http-server-uri, "/Thomson/ST2022S_HTTP");
}

class "ThomsonST2030S" {
    match if option user-class = "Thomson ST2030S";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Thomson ST2030S"));
    option bootfile-name "Thomson/ST2030S";
    option tftp-server-name = config-option VOIP.tftp-server-name;
    #option option-43 = concat(config-option VOIP.http-server-uri, "/Thomson/ST2030S_HTTP");
}

# Snom
subclass "voip-mac-address-prefix" 1:00:04:13 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Snom PREFIX 1:00:04:13"));
    option tftp-server-name = config-option VOIP.http-server-uri;
    option bootfile-name "/Snom/settings/snom.htm";
    option bootfile-name "/Snom/snom.php?mac={mac}";
}

# Doro
subclass "voip-mac-address-prefix" 1:00:1d:29 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Doro PREFIX 1:00:1d:29"));
#    option tftp-server-name = config-option VOIP.http-server-uri;
#    option bootfile-name "/Snom/settings/snom.htm";
#    option bootfile-name "/Snom/snom.php?mac={mac}";
}

# Aastra
class "Aastra6730i" {
    match if option vendor-class-identifier = "AastraIPPhone6730i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6730i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "Aastra6731i" {
    match if option vendor-class-identifier = "AastraIPPhone6731i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6731i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "Aastra6751i" {
    match if option vendor-class-identifier = "AastraIPPhone51i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6751i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "Aastra6753i" {
    match if option vendor-class-identifier = "AastraIPPhone53i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6753i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "Aastra6755i" {
    match if option vendor-class-identifier = "AastraIPPhone55i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6755i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "Aastra6757i" {
    match if option vendor-class-identifier = "AastraIPPhone57i";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra 6757i"));
    option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    #option tftp-server-name = config-option VOIP.tftp-server-name;
}

subclass "voip-mac-address-prefix" 1:00:08:5d {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Aastra PREFIX 1:00:08:5d"));
        option tftp-server-name = concat("http://", config-option VOIP.http-server-name, "/provisioning/Aastra/");
    }
}

# Cisco
class "CiscoCP-7941G" {
    match if suffix(option vendor-class-identifier, 9) = "CP-7941G\x00";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Cisco CP-7941G"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "CiscoCP-7941G-GE" {
    match if suffix(option vendor-class-identifier, 12) = "CP-7941G-GE\x00";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Cisco CP-7941G-GE"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "CiscoCP-7945G" {
    match if suffix(option vendor-class-identifier, 9) = "CP-7945G\x00";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Cisco CP-7945G"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
}

class "CiscoCP-7970G" {
    match if suffix(option vendor-class-identifier, 9) = "CP-7970G\x00";
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Cisco CP-7970G"));
    option tftp-server-name = config-option VOIP.tftp-server-name;
}

# Unidata Hitachi Wifi
subclass "voip-mac-address-prefix" 1:00:03:2a {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Unidata Hitachi Wifi PREFIX 1:00:03:2a"));
}

# GrandStream
subclass "voip-mac-address-prefix" 1:00:0b:82 {
    log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT GrandStream PREFIX 1:00:0b:82"));
}

# Audiocodes
subclass "voip-mac-address-prefix" 1:00:90:8f {
    log(concat("[", binary-to-ascii(16,8,":",hardware), "] ", "BOOT Audiocodes PREFIX 1:00:90:8f"));
}

# Siemens
class "SiemensC470IP" {
    match if substring(option vendor-class-identifier, 0, 6) = "C470IP";
    log("boot Siemens C470IP");
    execute("/usr/share/pf-xivo-provisioning/bin/dhcpconfig",
            "-w30",
            "-f",
            "C470IP",
            binary-to-ascii(10, 8, ".", leased-address),
            binary-to-ascii(16, 8, ":", suffix(hardware, 6)));
}

class "SiemensS675IP" {
    match if substring(option vendor-class-identifier, 0, 6) = "S675IP";
    log("boot Siemens S675IP");
    execute("/usr/share/pf-xivo-provisioning/bin/dhcpconfig",
            "-w30",
            "-f",
            "S675IP",
            binary-to-ascii(10, 8, ".", leased-address),
            binary-to-ascii(16, 8, ":", suffix(hardware, 6)));
}

subclass "voip-mac-address-prefix" 1:00:13:a9 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Siemens PREFIX 1:00:13:a9"));
        execute("/usr/share/pf-xivo-provisioning/bin/dhcpconfig",
                "-w30",
                "-f",
                "-u",
                "S675IP",
                binary-to-ascii(10, 8, ".", leased-address),
                binary-to-ascii(16, 8, ":", suffix(hardware, 6)));
    }
}

subclass "voip-mac-address-prefix" 1:00:01:e3 {
    if not exists vendor-class-identifier {
        log(concat("[", binary-to-ascii(16, 8, ":", hardware), "] ", "BOOT Siemens PREFIX 1:00:01:e3"));
        execute("/usr/share/pf-xivo-provisioning/bin/dhcpconfig",
                "-w30",
                "-f",
                "-u",
                "S675IP",
                binary-to-ascii(10, 8, ".", leased-address),
                binary-to-ascii(16, 8, ":", suffix(hardware, 6)));
    }
}
