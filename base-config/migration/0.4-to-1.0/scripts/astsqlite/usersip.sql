DELETE FROM tmp_usersip WHERE category = 'user';

INSERT INTO tmp_usersip (
	id,
	name,
	type,
	username,
	secret,
	md5secret,
	context,
	language,
	accountcode,
	amaflags,
	allowtransfer,
	fromuser,
	fromdomain,
	mailbox,
	subscribemwi,
	buggymwi,
	'call-limit',
	callerid,
	fullname,
	cid_number,
	maxcallbitrate,
	insecure,
	nat,
	canreinvite,
	promiscredir,
	usereqphone,
	videosupport,
	trustrpid,
	sendrpid,
	allowsubscribe,
	allowoverlap,
	dtmfmode,
	rfc2833compensate,
	qualify,
	g726nonstandard,
	disallow,
	allow,
	autoframing,
	mohinterpret,
	mohsuggest,
	useclientcode,
	progressinband,
	t38pt_udptl,
	t38pt_rtp,
	t38pt_tcp,
	t38pt_usertpsource,
	rtptimeout,
	rtpholdtimeout,
	rtpkeepalive,
	deny,
	permit,
	defaultip,
	callgroup,
	pickupgroup,
	setvar,
	host,
	port,
	regexten,
	subscribecontext,
	fullcontact,
	vmexten,
	callingpres,
	ipaddr,
	regseconds,
	regserver,
	lastms,
	protocol,
	category,
	commented)
SELECT
	usersip.id,
	usersip.name,
	usersip.type,
	usersip.username,
	usersip.secret,
	usersip.md5secret,
	usersip.context,
	usersip.language,
	NULLIF(usersip.accountcode,''),
	IFNULL(NULLIF(usersip.amaflags,''),'default'),
	usersip.allowtransfer,
	NULLIF(usersip.fromuser,''),
	NULLIF(usersip.fromdomain,''),
	NULLIF(usersip.mailbox,''),
	usersip.subscribemwi,
	usersip.buggymwi,
	usersip."call-limit",
	usersip.callerid,
	usersip.fullname,
	usersip.cid_number,
	usersip.maxcallbitrate,
	NULLIF(usersip.insecure,''),
	NULLIF(usersip.nat,''),
	NULLIF(usersip.canreinvite,''),
	usersip.promiscredir,
	usersip.usereqphone,
	usersip.videosupport,
	usersip.trustrpid,
	usersip.sendrpid,
	usersip.allowsubscribe,
	usersip.allowoverlap,
	NULLIF(usersip.dtmfmode,''),
	usersip.rfc2833compensate,
	NULLIF(usersip.qualify,''),
	usersip.g726nonstandard,
	NULLIF(usersip.disallow,''),
	NULLIF(usersip.allow,''),
	usersip.autoframing,
	usersip.mohinterpret,
	usersip.mohsuggest,
	usersip.useclientcode,
	usersip.progressinband,
	usersip.t38pt_udptl,
	usersip.t38pt_rtp,
	usersip.t38pt_tcp,
	usersip.t38pt_usertpsource,
	NULLIF(usersip.rtptimeout,''),
	NULLIF(usersip.rtpholdtimeout,''),
	usersip.rtpkeepalive,
	NULLIF(usersip.deny,''),
	NULLIF(usersip.permit,''),
	NULLIF(usersip.defaultip,''),
	NULLIF(usersip.callgroup,''),
	NULLIF(usersip.pickupgroup,''),
	usersip.setvar,
	IFNULL(NULLIF(usersip.host,''),'dynamic'),
	NULLIF(usersip.port,''),
	NULLIF(usersip.regexten,''),
	usersip.subscribecontext,
	NULLIF(usersip.fullcontact,''),
	usersip.vmexten,
	usersip.callingpres,
	IFNULL(usersip.ipaddr,''),
	IFNULL(usersip.regseconds,0),
	usersip.regserver,
	'',
	'sip',
	'user',
	usersip.commented
FROM usersip
WHERE usersip.category = 'user';
