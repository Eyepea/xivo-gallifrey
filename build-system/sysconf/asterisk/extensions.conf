[default]
exten = _30X,1,Set(DYNAMIC_FEATURES=automon)
exten = _30X,2,Set(TOUCH_MONITOR_FORMAT=gsm)
exten = _30X,3,Dial(SIP/${EXTEN},30,w)
exten = _30X,4,Set(MAILBOX=${EXTEN})
exten = _30X,5,Wait(2)
exten = _30X,6,Goto(s-${DIALSTATUS},1)

exten = s-NOANSWER,1,Goto(s-VMU,1)
exten = s-ANSWER,1,Hangup
exten = s-CONGESTION,1,Goto(s-VMU,1)
exten = s-CANCEL,1,Goto(s-VMU,1)
exten = s-BUSY,1,Goto(s-VMB,1)
exten = s-CHANUNAVAIL,1,Goto(s-VMU,1)

exten = s-VMU,1,Voicemail(u${MAILBOX})
exten = s-VMU,2,Hangup

exten = s-VMB,1,Voicemail(b${MAILBOX})
exten = s-VMB,2,Hangup

; H.323 support temporarily removed.
; 
; This is the e164 number used by Asterisk to register itself as a H.323
; gateway. Having this entry prevents Asterisk to call itself, which results
; in a bad loop.
;exten = 310,1,Hangup

;exten = _31X,1,Dial(OOH323/${EXTEN})
;exten = _31X,2,Voicemail(u${EXTEN})
;exten = _31X,3,Hangup

exten = _7.,1,Pickup(${EXTEN:1})
exten = _7.,2,Hangup

exten = 887,1,Queue(all)
exten = 887,2,Hangup

exten = 888,1,VoiceMailMain(${CALLERIDNUM},s)
exten = 888,2,Hangup

exten = 889,1,Directory(default)
exten = 889,2,Hangup

exten = 000,1,MeetMe(000,1Mpq)
exten = 000,2,Hangup

; mISDN support needs more testing.
;exten = _XXXX.,1,Dial(mISDN/1/${EXTEN})
;exten = _XXXX.,2,Hangup

;exten = _XXXX.,1,Dial(Zap/4/${EXTEN})
;exten = _XXXX.,2,Hangup

[from-sip]
include = default

;[from-h323]
;include = default
