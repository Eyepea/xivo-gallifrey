# $Revision$
# $Date$
#
# Sample xivo_daemon.conf file
#

[general]
commandset = xivosimple
port_fiche_login = 5000
port_fiche_keepalive = 5001
port_fiche_agi = 5002
port_switchboard = 5003
port_webi = 5004
# capabilities = instantmessaging,customerinfo,history,dial,directory
asterisklist = my_asterisk
# asterisklist = my_asterisk,another_asterisk

xivoclient_session_timeout = 60
phonelist_update_period = 60
# maximal number of switchboard GUI's allowed to connect to the server
maxgui_sb = 2
# maximal number of xivoclient GUI's allowed to connect to the server
maxgui_xc = 10

# List of Asterisk servers
# Only the names also in "asterisklist" above shall be considered

[my_asterisk]
localaddr = 127.0.0.1
userlisturl = https://127.0.0.1/service/ipbx/web_services.php/users/
ipaddress = 127.0.0.1
ipaddress_webi = 127.0.0.1
ami_port = 5038
ami_login = xivouser
ami_pass  = xivouser
contexts = default
# database configuration for history display (anysql : sqlite and mysql have been tested)
cdr_db_uri = mysql://user:pass@127.0.0.1:3306/db
userfeatures_db_uri = mysql://user:pass@127.0.0.1:3306/db
# add here any extra (not SIP) channels, such as mISDN/1, IAX2/provider, ...
# extrachannels = 

[another_asterisk]
localaddr = 127.0.0.1
userlisturl = https://127.0.0.1/service/ipbx/web_services.php/users/
ipaddress = 127.0.0.1
ipaddress_webi = 127.0.0.1
ami_port = 5038
ami_login = xivouser
ami_pass  = xivouser
contexts = default
cdr_db_uri = sqlite:/var/lib/asterisk/astsqlite?timeout_ms=150
userfeatures_db_uri = sqlite:/var/lib/asterisk/astsqlite?timeout_ms=150




### List of Contexts for directory search configurations

[default]
## database configuration for directory search (LDAP)
## this is the common URI for Directory and Customer Info
# dir_db_uri = ldap://cn=<xxx>,dc=<xxx>,dc=<xxx>,dc=<xxx>:openxchange@127.0.0.1:389/dc=<xxx>,dc=<xxx>,dc=<xxx>

## database configuration for directory search (anySQL : tested with MySQL)
## The main difference with LDAP is : we need the table's name
# dir_db_uri = mysql://asterisk:asterisk@127.0.0.1:3306/asterisk?charset=utf8
# dir_db_sqltable = addresses


## these are the definitions for Directory display
# dir_db_search.1.display = Numero
# dir_db_search.1.match   = telephoneNumber,mobile
# dir_db_search.1.space   = false
# dir_db_search.2.display = Nom
# dir_db_search.2.match   = cn
# dir_db_search.3.display = Entreprise
# dir_db_search.3.match   = o
# dir_db_search.4.display = E-mail
# dir_db_search.4.match   = mail



## these are the definitions for the Customer Info

## * this first field defines the name(s) of the DB field(s) to be
##   matched against the callerid num
# dir_db_sheet.callidmatch = telephoneNumber,mobile,pager

## * the 'field' is the name used later in [sheet_display] configuration
## * the 'match' is the corresponding DB field name(s)
# dir_db_sheet.1.field = callidname
# dir_db_sheet.1.match = cn
# dir_db_sheet.2.field = mail
# dir_db_sheet.2.match = mail
# dir_db_sheet.3.field = firstname
# dir_db_sheet.3.match = sn
# dir_db_sheet.4.field = name
# dir_db_sheet.4.match = givenName
# dir_db_sheet.5.field = company
# dir_db_sheet.5.match = o





### Sheet / Customer Info ###

[sheet_display] # customer info display config
# order|variable = type|title|defaultvalue
10|name = text|Nom|Inconnu
80|fullnumber = text|Numero d'appelant|Aucun
82|refnumber = text|Reference|Inconnue
84|agency = text|Agence|Pas d'Agence
86|zipcode = text|Code Postal|Inconnu
88|town = text|Ville|Inconnue
90|medal = text|Couleur|Inconnue

[NO_sheet_display] # customer info contents definition
# order|variable = type|title|defaultvalue
10|name = text|Nom|Inconnu
20|firstname = text|Prenom|Inconnu
25|company = text|Entreprise|Inconnue
30|req_cid = phone|Numero|Inconnu
40|picture = picture|Photo|file:/Unknown.png
50|mail = url|Adresse email|unknown@unknown.org
60|homepage = url|Homepage|http://www.company.com
70|daymsg = text|Message du jour|Hello

[sheet_extraformat] # formats 1 
name = <b>|</b>
town = <b>|</b>

[NO_sheet_extraformat] # formats 2
name = <b>|</b>
mail = mailto:|
daymsg = <b>|</b>
company = <b>|</b>

[sheet_pictures]
101 = file:/Photo1.png
102 = file:/Photo2.png

